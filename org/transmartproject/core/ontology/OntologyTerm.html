<!DOCTYPE html><html lang="en"><head><title>org/transmartproject/core/ontology/OntologyTerm</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="org/transmartproject/core/ontology/OntologyTerm"><meta name="groc-project-path" content="src/main/groovy/org/transmartproject/core/ontology/OntologyTerm.groovy"><meta name="groc-github-url" content="https://github.com/thehyve/transmart-core-api"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/thehyve/transmart-core-api/blob/master/src/main/groovy/org/transmartproject/core/ontology/OntologyTerm.groovy">src/main/groovy/org/transmartproject/core/ontology/OntologyTerm.groovy</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">transmartproject</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">ontology</span>

<span class="kn">import</span> <span class="nn">org.transmartproject.core.ontology.OntologyTerm.VisualAttributes</span>

<span class="cm">/**</span>
<span class="cm"> * An i2b2 ontology metadata entry.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OntologyTerm</span> <span class="o">{</span>

    <span class="cm">/**</span>
<span class="cm">     * The hierarchical level of the term. The term at the highest level of a`</span>
<span class="cm">     * hierarchy has a value of 0, the next level has a value of 1 and so on.</span>
<span class="cm">     *</span>
<span class="cm">     * @return non-negative integer representing the depth of the term</span>
<span class="cm">     */</span>
    <span class="n">Integer</span> <span class="nf">getLevel</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns the term key; this is a string starting with \\,</span>
<span class="cm">     * followed by the the table code and the concept full name</span>
<span class="cm">     * @return \\&lt;table code&gt;&lt;full name&gt;</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getKey</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * The hierarchical path that leads to the term,</span>
<span class="cm">     * like &lt;code&gt;\i2b2\Diagnoses\Musculoskeletal and connective tissue (710)</span>
<span class="cm">     * \Arthropaties (710-19)\(714) Rheumatoid arthritis and other</span>
<span class="cm">     * arthropaties\(714-0) Rheumatoid arthritis&lt;/code&gt;.</span>
<span class="cm">     *</span>
<span class="cm">     * @return the full path of the term; path with \ as a separator</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getFullName</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * The user friendly name of the term.</span>
<span class="cm">     *</span>
<span class="cm">     * @return a term name to be displayed to the user</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * A short (50 chars max) string identifying this object.</span>
<span class="cm">     * @return a short identifier for this object</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getCode</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * A tooltip to appear in the user interface for this term.</span>
<span class="cm">     *</span>
<span class="cm">     * @return the term&#39;s tooltip</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getTooltip</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * A set of up to three visual attributes that describe how the field</span>
<span class="cm">     * should look in the user interface.</span>
<span class="cm">     *</span>
<span class="cm">     * @return set of {@link VisualAttributes} enum instances</span>
<span class="cm">     */</span>
    <span class="n">EnumSet</span><span class="o">&lt;</span><span class="n">VisualAttributes</span><span class="o">&gt;</span> <span class="nf">getVisualAttributes</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * The term metadata, or null if none. The format of the metadata is not</span>
<span class="cm">     * specified.</span>
<span class="cm">     *</span>
<span class="cm">     * @return metadata associated with the term</span>
<span class="cm">     */</span>
    <span class="n">Object</span> <span class="nf">getMetadata</span><span class="o">()</span>


    <span class="cm">/**</span>
<span class="cm">     * Returns the terms one level below that have this term as a parent.</span>
<span class="cm">     * Synonyms and hidden terms are not shown.</span>
<span class="cm">     *</span>
<span class="cm">     * @return (direct) children of this term, ordered by name</span>
<span class="cm">     */</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">OntologyTerm</span><span class="o">&gt;</span> <span class="nf">getChildren</span><span class="o">()</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns the terms one level below that have this term as a parent.</span>
<span class="cm">     *</span>
<span class="cm">     * @param showHidden whether to return items with the hidden visual</span>
<span class="cm">     * attribute</span>
<span class="cm">     * @para showSynonyms whether to show synonyms</span>
<span class="cm">     * @return (direct) children of this term, ordered by name</span>
<span class="cm">     */</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">OntologyTerm</span><span class="o">&gt;</span> <span class="nf">getChildren</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">showHidden</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">showSynonyms</span><span class="o">)</span>

    <span class="kd">enum</span> <span class="n">VisualAttributes</span> <span class="o">{</span>

        <span class="cm">/**</span>
<span class="cm">         * Non-terminal term that can be used as a query item.</span>
<span class="cm">         */</span>
        <span class="n">FOLDER</span>              <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;F&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * Non-terminal term that cannot be used as a query item.</span>
<span class="cm">         */</span>
        <span class="n">CONTAINER</span>           <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;C&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * The term represents several terms, which are collapsed on it. An</span>
<span class="cm">         * example is under Gender in the Demographics folder &amp;#2013; the</span>
<span class="cm">         * term &#39;Unknown&#39; having this type indicates that there are at least</span>
<span class="cm">         * two terms that are considered to be &#39;Unknown Gender&#39; and both are</span>
<span class="cm">         * mapped to that one.</span>
<span class="cm">         */</span>
        <span class="n">MULTIPLE</span>            <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;M&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * A terminal term.</span>
<span class="cm">         */</span>
        <span class="n">LEAF</span>                <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;L&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>
        <span class="n">MODIFIER_CONTAINER</span>  <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;O&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>
        <span class="n">MODIFIER_FOLDER</span>     <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;D&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>
        <span class="n">MODIFIER_LEAF</span>       <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="sc">&#39;R&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>


        <span class="cm">/**</span>
<span class="cm">         * A term to be displayed normally.</span>
<span class="cm">         */</span>
        <span class="n">ACTIVE</span>              <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="sc">&#39;A&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * A term that cannot be used.</span>
<span class="cm">         */</span>
        <span class="n">INACTIVE</span>            <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="sc">&#39;I&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * The term is hidden from the user.</span>
<span class="cm">         */</span>
        <span class="n">HIDDEN</span>              <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="sc">&#39;H&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>


        <span class="cm">/**</span>
<span class="cm">         * If present, the term can have children added to it and it can also</span>
<span class="cm">         * be deleted.</span>
<span class="cm">         */</span>
        <span class="n">EDITABLE</span>            <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="sc">&#39;E&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">),</span>

        <span class="cm">/**</span>
<span class="cm">         * !! tranSMART extension !!</span>
<span class="cm">         * Indicates high-dimensional data.</span>
<span class="cm">         */</span>
        <span class="n">HIGH_DIMENSIONAL</span>    <span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="sc">&#39;H&#39;</span> <span class="n">as</span> <span class="n">Character</span><span class="o">)</span>

        <span class="kt">int</span> <span class="n">position</span><span class="o">;</span>
        <span class="kt">char</span> <span class="n">keyChar</span><span class="o">;</span>

        <span class="kd">protected</span> <span class="nf">VisualAttributes</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">char</span> <span class="n">keyChar</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">position</span> <span class="o">=</span> <span class="n">position</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">keyChar</span> <span class="o">=</span> <span class="n">keyChar</span>
        <span class="o">}</span>

        <span class="kd">static</span> <span class="n">EnumSet</span><span class="o">&lt;</span><span class="n">VisualAttributes</span><span class="o">&gt;</span> <span class="nf">forSequence</span><span class="o">(</span><span class="n">String</span> <span class="n">sequence</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">def</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">EnumSet</span><span class="o">.</span><span class="na">noneOf</span><span class="o">(</span><span class="n">VisualAttributes</span><span class="o">)</span>
            <span class="n">def</span> <span class="n">allValues</span> <span class="o">=</span> <span class="n">values</span><span class="o">()</span>
            <span class="n">sequence</span><span class="o">.</span><span class="na">eachWithIndex</span><span class="o">{</span> <span class="n">String</span> <span class="n">c</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">-&gt;</span>
                <span class="n">def</span> <span class="n">v</span> <span class="o">=</span> <span class="n">allValues</span><span class="o">.</span><span class="na">find</span> <span class="o">{</span> <span class="n">it</span><span class="o">.</span><span class="na">position</span> <span class="o">==</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">it</span><span class="o">.</span><span class="na">keyChar</span> <span class="o">==</span> <span class="n">c</span> <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">v</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                    <span class="n">ret</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">v</span><span class="o">)</span>
            <span class="o">}</span>
            <span class="n">ret</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></div></div></div></div></body></html>